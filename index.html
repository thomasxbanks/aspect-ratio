<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Aspect Ratio</title>
    <style>
        main {
            max-width: 960px;
            margin: 0 auto;
        }
    </style>
</head>

<body>
    <main>
        <iframe src="https://player.vimeo.com/video/18554749" width="640" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
        <iframe src="https://player.vimeo.com/video/18554749" width="640" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
        <p><a href="https://vimeo.com/18554749">NYC - Mindrelic Timelapse</a> from <a href="https://vimeo.com/mindrelic">Mindrelic</a> on <a href="https://vimeo.com">Vimeo</a>.</p>
    </main>
    <script>
        const AspectRatio = (element, parent, originalDimensions) => {
            // new height = (original height / original width) x new width
            var newHeight = (originalDimensions.height / originalDimensions.width) * parent.clientWidth
            element.setAttribute('height', ~~(newHeight))
            element.setAttribute('width', ~~(parent.clientWidth))

            // log for debug
            //console.log('newheight', ~~(newHeight), 'newWidth', ~~(containerWidth))

        }

        window.onload = (e) => {
            let elements = document.body.getElementsByTagName('iframe')
            let originalDimensions = {
                "width": elements[0].getAttribute('width'),
                "height": elements[0].getAttribute('height')
            }


            for (var i = 0; i < elements.length; i++) {
                AspectRatio(elements[i], elements[i].parentElement, originalDimensions)
            }


            window.onresize = (e) => {
                for (var i = 0; i < elements.length; i++) {
                    AspectRatio(elements[i], elements[i].parentElement, originalDimensions)
                }
            }

        }
    </script>
</body>

</html>
